# Kaizen Evaluation Criteria — Self-Evolving
# Kaizen reviews and may add/modify/disable criteria each run
# Changes must be recorded in the kaizen report

version: 1
last_updated: "2026-02-20"
updated_by: "Mother (initial setup)"

criteria:
  - id: creator_satisfaction
    name: Creator Satisfaction
    description: Positive/negative ratio from Discord feedback
    source: discord_feedback
    channels: ["1471863670718857247", "1471863673885556940"]
    metric: positive_ratio
    threshold: 0.7
    enabled: true

  - id: geo_score_trend
    name: GEO Score Trend
    description: Average GEO score of submissions over last 7 days
    source: submissions
    metric: 7day_avg
    threshold: 70
    enabled: true

  - id: agent_error_rate
    name: Agent Error Rate
    description: Error/failure ratio per session
    source: session_logs
    agents: ["main", "walter", "herald"]
    metric: error_per_session
    threshold: 0.1
    enabled: true

  - id: pipeline_throughput
    name: Pipeline Throughput
    description: Weekly published content count
    source: submissions
    metric: weekly_published
    threshold: 3
    enabled: true

  - id: review_turnaround
    name: Review Turnaround Time
    description: Average hours from peer review assignment to completion
    source: submissions
    metric: avg_hours_to_review
    threshold: 48
    enabled: true

  - id: skill_reliability
    name: Skill Execution Reliability
    description: Cron job / sub-agent success rate
    source: cron_logs
    metric: success_rate
    threshold: 0.95
    enabled: true

  - id: token_efficiency
    name: Token Efficiency
    description: Average cost per task
    source: session_status
    metric: cost_per_task_usd
    threshold: 0.50
    enabled: true

  - id: token_tracker_accuracy
    name: Token Tracker Accuracy
    description: Token Tracker가 전체 사용량을 정확히 집계하는지
    source: cron_runs
    metric: reported_vs_actual_ratio
    threshold: 0.8
    enabled: true
    note: "Tracker가 자기 세션만 추적하는 버그 발견 (2026-02-21). 수정 후 모니터링."

  - id: daily_cost_threshold
    name: Daily Cost Threshold
    description: 일일 비용이 $50 이하인지
    source: token_usage_md
    metric: daily_total_usd
    threshold: 50
    enabled: true

  - id: escalation_learning
    name: Escalation Learning Rate
    description: Ratio of repeated escalations for same pattern (lower is better)
    source: lessons_md
    agents: ["main", "walter", "herald"]
    metric: repeat_escalation_ratio
    threshold: 0.1
    enabled: true

  - id: guide_effectiveness
    name: Guide Effectiveness
    description: Reduction in Creator questions after guide deployment
    source: discord_feedback
    metric: question_reduction_rate
    threshold: 0.3
    enabled: true

  - id: frontmatter_error_rate
    name: Frontmatter Error Rate
    description: Ratio of submissions with frontmatter errors (lower is better)
    source: submissions
    metric: error_ratio
    threshold: 0.2
    enabled: true
