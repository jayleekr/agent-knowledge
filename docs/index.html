<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Kaizen â™»ï¸ Self-Improvement Loop</title>
<script src="https://cdn.jsdelivr.net/npm/mermaid@11/dist/mermaid.min.js"></script>
<script>
  mermaid.initialize({
    startOnLoad: false,
    theme: 'dark',
    themeVariables: {
      primaryColor: '#238636',
      primaryTextColor: '#f0f6fc',
      primaryBorderColor: '#30363d',
      lineColor: '#58a6ff',
      secondaryColor: '#161b22',
      tertiaryColor: '#1c2333',
      fontFamily: '-apple-system, BlinkMacSystemFont, Segoe UI, Roboto, sans-serif',
      fontSize: '14px',
      nodeBorder: '#30363d',
      clusterBkg: '#161b22',
      clusterBorder: '#30363d',
      edgeLabelBackground: '#0d1117',
    }
  });
</script>
<style>
  * { margin: 0; padding: 0; box-sizing: border-box; }
  body {
    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
    background: #0d1117;
    color: #c9d1d9;
    min-height: 100vh;
    padding: 40px 20px;
  }
  h1 { text-align: center; font-size: 2rem; margin-bottom: 8px; color: #58a6ff; }
  .subtitle {
    text-align: center; color: #8b949e; margin-bottom: 32px; font-size: 0.95rem;
  }
  .subtitle a { color: #58a6ff; text-decoration: none; }
  .cron-badge {
    display: inline-block; background: #1f2937; border: 1px solid #374151;
    border-radius: 6px; padding: 3px 10px; font-size: 0.75rem;
    color: #a5b4fc; font-family: monospace; margin-left: 8px;
  }

  /* Tabs */
  .tabs {
    display: flex; justify-content: center; gap: 8px; margin-bottom: 32px;
  }
  .tab-btn {
    background: #161b22; border: 1px solid #30363d; border-radius: 8px;
    color: #8b949e; padding: 10px 24px; cursor: pointer; font-size: 0.9rem;
    font-weight: 600; transition: all 0.2s;
  }
  .tab-btn:hover { border-color: #58a6ff; color: #c9d1d9; }
  .tab-btn.active { background: #1f6feb; border-color: #1f6feb; color: #fff; }
  .tab-content { display: none; }
  .tab-content.active { display: block; }

  /* Diagram tab */
  .diagrams { max-width: 1100px; margin: 0 auto; }
  .diagram-section { margin-bottom: 48px; }
  .diagram-section h2 {
    font-size: 1.3rem; color: #f0f6fc; margin-bottom: 20px;
    padding-left: 12px; border-left: 4px solid #238636;
  }
  .mermaid {
    background: #161b22; border: 1px solid #30363d; border-radius: 16px;
    padding: 24px; overflow-x: auto;
  }
  .mermaid svg { max-width: 100%; height: auto; }

  /* Cards tab (existing visual) */
  .loop-container { max-width: 1100px; margin: 0 auto 64px; }
  .section-title {
    font-size: 1.4rem; color: #f0f6fc; margin-bottom: 24px;
    padding-left: 12px; border-left: 4px solid #238636;
  }
  .sources { display: flex; justify-content: center; gap: 16px; flex-wrap: wrap; margin-bottom: 16px; }
  .source-card {
    background: #161b22; border: 1px solid #30363d; border-radius: 12px;
    padding: 16px 20px; text-align: center; min-width: 140px;
    transition: transform 0.2s, border-color 0.2s;
  }
  .source-card:hover { transform: translateY(-4px); border-color: #58a6ff; }
  .source-card .emoji { font-size: 2rem; margin-bottom: 8px; }
  .source-card .name { font-weight: 600; color: #f0f6fc; font-size: 0.9rem; }
  .source-card .detail { color: #8b949e; font-size: 0.75rem; margin-top: 4px; }
  .arrow { text-align: center; padding: 12px 0; color: #484f58; font-size: 1.4rem; }
  .steps { display: flex; flex-direction: column; gap: 0; align-items: center; }
  .step {
    background: #161b22; border: 1px solid #30363d; border-radius: 16px;
    padding: 24px 32px; max-width: 600px; width: 100%; position: relative;
  }
  .step.collect { border-left: 4px solid #f78166; }
  .step.analyze { border-left: 4px solid #d2a8ff; }
  .step.classify { border-left: 4px solid #79c0ff; }
  .step.commit { border-left: 4px solid #238636; }
  .step .step-num {
    position: absolute; top: -12px; left: 24px; background: #0d1117;
    padding: 2px 10px; border-radius: 20px; font-size: 0.75rem;
    font-weight: 700; text-transform: uppercase; letter-spacing: 1px;
  }
  .step.collect .step-num { color: #f78166; border: 1px solid #f78166; }
  .step.analyze .step-num { color: #d2a8ff; border: 1px solid #d2a8ff; }
  .step.classify .step-num { color: #79c0ff; border: 1px solid #79c0ff; }
  .step.commit .step-num { color: #238636; border: 1px solid #238636; }
  .step h3 { color: #f0f6fc; margin-bottom: 10px; font-size: 1.1rem; }
  .step ul { list-style: none; padding: 0; }
  .step ul li { padding: 4px 0 4px 20px; position: relative; font-size: 0.9rem; }
  .step ul li::before { content: 'â†’'; position: absolute; left: 0; color: #484f58; }
  .split { display: flex; gap: 24px; max-width: 700px; width: 100%; justify-content: center; }
  .split-card {
    flex: 1; background: #161b22; border: 1px solid #30363d;
    border-radius: 16px; padding: 24px;
  }
  .split-card.auto { border-top: 3px solid #238636; }
  .split-card.review { border-top: 3px solid #d29922; }
  .split-card h4 { margin-bottom: 10px; font-size: 1rem; }
  .split-card.auto h4 { color: #3fb950; }
  .split-card.review h4 { color: #d29922; }
  .split-card ul { list-style: none; padding: 0; }
  .split-card ul li { padding: 3px 0 3px 16px; position: relative; font-size: 0.85rem; color: #8b949e; }
  .split-card ul li::before { content: 'â€¢'; position: absolute; left: 0; }
  .github-box {
    background: linear-gradient(135deg, #161b22, #1c2333);
    border: 2px solid #30363d; border-radius: 20px; padding: 32px;
    max-width: 600px; width: 100%; text-align: center;
  }
  .github-box .gh-icon { font-size: 2.5rem; margin-bottom: 12px; }
  .github-box h3 { color: #f0f6fc; margin-bottom: 16px; }
  .github-box .files { display: flex; flex-wrap: wrap; gap: 8px; justify-content: center; }
  .file-tag {
    background: #21262d; border: 1px solid #30363d; border-radius: 8px;
    padding: 6px 12px; font-family: 'SF Mono', 'Fira Code', monospace;
    font-size: 0.8rem; color: #79c0ff;
  }
  .loop-back { text-align: center; padding: 16px 0; color: #238636; font-size: 0.9rem; font-weight: 600; }
  .loop-back .arrow-art { font-size: 1.4rem; display: block; margin-bottom: 4px; }
  .secondary {
    max-width: 1100px; margin: 0 auto 64px;
    display: grid; grid-template-columns: 1fr 1fr; gap: 32px;
  }
  @media (max-width: 768px) {
    .secondary { grid-template-columns: 1fr; }
    .split { flex-direction: column; }
  }
  .secondary-card {
    background: #161b22; border: 1px solid #30363d; border-radius: 16px; padding: 28px;
  }
  .secondary-card h3 { color: #f0f6fc; margin-bottom: 16px; font-size: 1.1rem; }
  .flow-step { display: flex; align-items: flex-start; gap: 12px; padding: 8px 0; }
  .flow-step .dot { width: 10px; height: 10px; border-radius: 50%; margin-top: 5px; flex-shrink: 0; }
  .flow-step p { font-size: 0.85rem; }
  .flow-step p strong { color: #f0f6fc; }
  footer { text-align: center; color: #484f58; font-size: 0.8rem; padding: 40px 0 20px; }
  footer a { color: #58a6ff; text-decoration: none; }
</style>
</head>
<body>

<h1>â™»ï¸ Kaizen Self-Improvement Loop</h1>
<p class="subtitle">
  Powered by <a href="https://openclaw.ai">OpenClaw</a> Multi-Agent System
  <span class="cron-badge">cron: 11:00 AM / 19:00 PM KST</span>
</p>

<!-- Tabs -->
<div class="tabs">
  <button class="tab-btn active" onclick="switchTab('diagram')">ğŸ“Š Diagrams</button>
  <button class="tab-btn" onclick="switchTab('cards')">ğŸƒ Card View</button>
</div>

<!-- ==================== DIAGRAM TAB ==================== -->
<div id="tab-diagram" class="tab-content active">
<div class="diagrams">

  <!-- Dual Flow Overview -->
  <div class="diagram-section">
    <h2>Dual Improvement Flows (Real-Time + Batch)</h2>
    <div class="mermaid" id="dual-flow">
flowchart TB
    subgraph FlowA["âš¡ Flow A: Agent-Initiated Issues (Real-Time)"]
        direction TB
        A_Problem["ğŸš¨ Agent encounters<br/>problem or improvement idea"]
        A_File["ğŸ“ gh issue create<br/>--repo agent-knowledge<br/>--label agent:name,priority:level"]
        A_Issue["ğŸ« GitHub Issue<br/>(open)"]
        A_Problem --> A_File --> A_Issue
    end

    subgraph FlowB["ğŸ”„ Flow B: Kaizen Batch (11:00 / 19:00)"]
        direction TB
        B_Pull["git pull --rebase"]
        B_Triage["ğŸ« Triage open issues<br/>auto-fixable? â†’ fix + close<br/>needs-jay? â†’ comment"]
        B_Collect["ğŸ“¥ Collect<br/>Discord Â· Sessions Â· GEO<br/>Cron Â· Tokens"]
        B_Analyze["ğŸ”¬ Analyze<br/>Patterns Â· Trends Â· Criteria"]
        B_Pull --> B_Triage --> B_Collect --> B_Analyze
    end

    A_Issue -->|"Kaizen picks up<br/>during next run"| B_Triage

    B_Analyze --> Classify{"ğŸ·ï¸ Risk?"}

    Classify -->|"Low"| Auto["âœ… Auto-Apply<br/>lessons Â· metrics<br/>eval-criteria Â· guides"]
    Classify -->|"High"| Pending["â³ Proposal / Issue<br/>needs-jay label"]

    Auto --> Commit["ğŸ“¤ git commit &amp; push<br/>+ close resolved issues"]
    Pending -->|"Jay reviews"| Jay["ğŸ‘¤ Jay"]
    Jay -->|"Approved"| Commit

    Commit --> GH[("ğŸ“¦ GitHub<br/>agent-knowledge")]
    GH -->|"Next cycle"| B_Pull

    B_Analyze -->|"Novel finding?"| NewIssue["ğŸ« File new Issue<br/>agent:kaizen"]
    NewIssue --> GH

    style FlowA fill:#1c2333,stroke:#58a6ff,color:#f0f6fc
    style FlowB fill:#1c2333,stroke:#238636,color:#f0f6fc
    style A_Problem fill:#2d1b0e,stroke:#f78166,color:#f0f6fc
    style A_File fill:#161b22,stroke:#79c0ff,color:#f0f6fc
    style A_Issue fill:#161b22,stroke:#d29922,color:#f0f6fc
    style B_Pull fill:#0d2d14,stroke:#238636,color:#f0f6fc
    style B_Triage fill:#2d200a,stroke:#d29922,color:#f0f6fc
    style B_Collect fill:#2d1b0e,stroke:#f78166,color:#f0f6fc
    style B_Analyze fill:#1e1533,stroke:#d2a8ff,color:#f0f6fc
    style Classify fill:#0d2137,stroke:#79c0ff,color:#f0f6fc
    style Auto fill:#0d2d14,stroke:#238636,color:#f0f6fc
    style Pending fill:#2d200a,stroke:#d29922,color:#f0f6fc
    style Commit fill:#0d2d14,stroke:#238636,color:#f0f6fc
    style GH fill:#161b22,stroke:#58a6ff,color:#58a6ff
    style Jay fill:#161b22,stroke:#d2a8ff,color:#d2a8ff
    style NewIssue fill:#161b22,stroke:#f78166,color:#f0f6fc
    </div>
  </div>

  <!-- Agent Issue Filing Flow -->
  <div class="diagram-section">
    <h2>Agent Issue Filing (Flow A Detail)</h2>
    <div class="mermaid" id="issue-flow">
flowchart LR
    subgraph Agents["Agents"]
        M["ğŸ«¶ Mother<br/>System issues"]
        W["ğŸ¤– Walter<br/>Work issues"]
        H["ğŸ”” Herald<br/>Creator issues"]
    end

    File["ğŸ“ gh issue create<br/>--label agent:X"]
    GH[("ğŸ“¦ GitHub Issues")]

    M --> File
    W --> File
    H --> File
    File --> GH

    GH --> Triage{"Kaizen Triage<br/>(next scheduled run)"}

    Triage -->|"auto-fixable"| Fix["â™»ï¸ Kaizen fixes<br/>+ closes issue"]
    Triage -->|"needs-jay"| Jay["ğŸ‘¤ Jay reviews<br/>on GitHub"]
    Triage -->|"needs more data"| Comment["ğŸ’¬ Kaizen adds<br/>analysis comment"]

    Jay -->|"Approved"| Fix2["â™»ï¸ Apply fix<br/>+ close issue"]
    Jay -->|"Rejected"| Close["âŒ Close with reason"]
    Comment -->|"next run"| Triage

    style Agents fill:#1c2333,stroke:#30363d,color:#c9d1d9
    style M fill:#2d200a,stroke:#d29922,color:#f0f6fc
    style W fill:#0d2137,stroke:#79c0ff,color:#f0f6fc
    style H fill:#2d1b0e,stroke:#f78166,color:#f0f6fc
    style File fill:#161b22,stroke:#79c0ff,color:#f0f6fc
    style GH fill:#161b22,stroke:#58a6ff,color:#58a6ff
    style Triage fill:#0d2d14,stroke:#238636,color:#f0f6fc
    style Fix fill:#0d2d14,stroke:#3fb950,color:#f0f6fc
    style Fix2 fill:#0d2d14,stroke:#3fb950,color:#f0f6fc
    style Jay fill:#161b22,stroke:#d2a8ff,color:#d2a8ff
    style Comment fill:#161b22,stroke:#d29922,color:#f0f6fc
    style Close fill:#161b22,stroke:#f47067,color:#f0f6fc
    </div>
  </div>

  <!-- Kaizen Batch Loop -->
  <div class="diagram-section">
    <h2>Kaizen Batch Loop (Flow B Detail)</h2>
    <div class="mermaid" id="batch-loop">
flowchart TB
    subgraph Sources["ğŸ“¡ Data Sources"]
        M["ğŸ«¶ Mother<br/>Session Logs"]
        W["ğŸ¤– Walter<br/>Session Logs"]
        H["ğŸ”” Herald<br/>Discord Threads"]
        C["ğŸ‘¥ Creators<br/>Feedback &amp; Submissions"]
        S["âš™ï¸ System<br/>Cron &amp; Tokens"]
        I["ğŸ« Open Issues<br/>GitHub"]
    end

    subgraph Collect["ğŸ“¥ Step 1: Collect"]
        C1["Read Discord channels"]
        C2["Scan agent sessions"]
        C3["Parse GEO scores"]
        C4["Check cron status"]
        C5["List open GitHub issues"]
    end

    subgraph Analyze["ğŸ”¬ Step 2: Analyze"]
        A1["Detect error patterns"]
        A2["Compare 7-day trends"]
        A3["Cross-reference lessons"]
        A4["Evaluate criteria"]
        A5["Match issues to findings"]
    end

    CL{"ğŸ·ï¸ Risk?"}

    subgraph Auto["âœ… Auto-Apply"]
        AA1["Update lessons"]
        AA2["Update metrics"]
        AA3["Tune criteria"]
        AA4["Close auto-fixable issues"]
    end

    subgraph Pending["â³ Needs Review"]
        P1["proposals/pending/"]
        P2["Label: needs-jay"]
        P3["File new issues"]
    end

    subgraph Commit["ğŸ“¤ Commit"]
        G1["git add Â· commit Â· push"]
        G2["Close resolved issues"]
    end

    GH[("ğŸ“¦ GitHub<br/>agent-knowledge")]
    Pull["ğŸ”„ git pull<br/>(next cycle)"]

    Sources --> Collect --> Analyze --> CL
    CL -->|"Low"| Auto --> Commit
    CL -->|"High"| Pending --> Commit
    Commit --> GH --> Pull -->|"Back to start"| Sources

    style Sources fill:#1c2333,stroke:#30363d,color:#c9d1d9
    style Collect fill:#2d1b0e,stroke:#f78166,color:#f0f6fc
    style Analyze fill:#1e1533,stroke:#d2a8ff,color:#f0f6fc
    style Auto fill:#0d2d14,stroke:#238636,color:#f0f6fc
    style Pending fill:#2d200a,stroke:#d29922,color:#f0f6fc
    style Commit fill:#0d2d14,stroke:#238636,color:#f0f6fc
    style GH fill:#161b22,stroke:#58a6ff,color:#58a6ff
    style Pull fill:#161b22,stroke:#238636,color:#3fb950
    </div>
  </div>

  <!-- Eval-Criteria Evolution -->
  <div class="diagram-section">
    <h2>Eval-Criteria Self-Evolution</h2>
    <div class="mermaid" id="eval-flow">
flowchart TB
    Load["ğŸ“„ Load<br/>eval-criteria.yaml<br/>(current version)"]
    Eval["ğŸ”¬ Evaluate each<br/>criterion against data"]

    Eval --> Check{"Criterion Status?"}

    Check -->|"Meaningless"| Disable["ğŸš« Disable<br/>+ record reason"]
    Check -->|"New signal"| Add["â• Add criterion<br/>+ record rationale"]
    Check -->|"Threshold off"| Adjust["ğŸ“ Adjust threshold<br/>based on 7-day trend"]
    Check -->|"Healthy"| Keep["âœ… Keep as-is"]

    Disable --> Save["ğŸ’¾ Commit updated<br/>eval-criteria.yaml"]
    Add --> Save
    Adjust --> Save
    Keep --> Save

    Save --> Git["ğŸ“¤ Push to GitHub<br/>(version history tracked)"]
    Git -.->|"Next run loads<br/>evolved version"| Load

    style Load fill:#0d2137,stroke:#79c0ff,color:#f0f6fc
    style Eval fill:#1e1533,stroke:#d2a8ff,color:#f0f6fc
    style Check fill:#161b22,stroke:#58a6ff,color:#f0f6fc
    style Disable fill:#2d0a0a,stroke:#f47067,color:#f0f6fc
    style Add fill:#0d2d14,stroke:#3fb950,color:#f0f6fc
    style Adjust fill:#2d200a,stroke:#d29922,color:#f0f6fc
    style Keep fill:#161b22,stroke:#30363d,color:#8b949e
    style Save fill:#161b22,stroke:#238636,color:#f0f6fc
    style Git fill:#161b22,stroke:#58a6ff,color:#58a6ff
    </div>
  </div>

  <!-- Agent Hierarchy -->
  <div class="diagram-section">
    <h2>Agent Hierarchy &amp; Communication</h2>
    <div class="mermaid" id="hierarchy">
flowchart TB
    Jay["ğŸ‘¤ Jay<br/>Owner (Tier 0)"]
    Mother["ğŸ«¶ Mother<br/>Orchestrator (Tier 1)"]
    Walter["ğŸ¤– Walter<br/>Work Specialist (Tier 2)"]
    Herald["ğŸ”” Herald<br/>Content Herald (Tier 2)"]
    Kaizen["â™»ï¸ Kaizen<br/>Cron Job"]
    GH[("ğŸ“¦ GitHub<br/>agent-knowledge")]

    Jay <-->|"direct chat"| Mother
    Mother -->|"delegate &amp; monitor"| Walter
    Mother -->|"delegate &amp; monitor"| Herald
    Mother -->|"spawns via cron"| Kaizen
    Walter -.x|"âŒ forbidden"| Herald

    Walter -->|"push lessons"| GH
    Herald -->|"push lessons<br/>(via PR)"| GH
    Mother -->|"push lessons"| GH
    Kaizen -->|"push findings<br/>metrics, proposals"| GH
    GH -->|"pull at cycle start"| Kaizen

    style Jay fill:#1e1533,stroke:#d2a8ff,color:#f0f6fc
    style Mother fill:#2d200a,stroke:#d29922,color:#f0f6fc
    style Walter fill:#0d2137,stroke:#79c0ff,color:#f0f6fc
    style Herald fill:#2d1b0e,stroke:#f78166,color:#f0f6fc
    style Kaizen fill:#0d2d14,stroke:#238636,color:#f0f6fc
    style GH fill:#161b22,stroke:#58a6ff,color:#58a6ff
    </div>
  </div>

</div>
</div>

<!-- ==================== CARD VIEW TAB ==================== -->
<div id="tab-cards" class="tab-content">

<div class="loop-container">
  <h2 class="section-title">Main Loop</h2>
  <div class="sources">
    <div class="source-card"><div class="emoji">ğŸ«¶</div><div class="name">Mother</div><div class="detail">Session logs<br>Escalations</div></div>
    <div class="source-card"><div class="emoji">ğŸ¤–</div><div class="name">Walter</div><div class="detail">Session logs<br>Work errors</div></div>
    <div class="source-card"><div class="emoji">ğŸ””</div><div class="name">Herald</div><div class="detail">Discord threads<br>Creator Q&A</div></div>
    <div class="source-card"><div class="emoji">ğŸ‘¥</div><div class="name">Creators</div><div class="detail">Feedback<br>Submissions</div></div>
    <div class="source-card"><div class="emoji">âš™ï¸</div><div class="name">System</div><div class="detail">Cron status<br>Token usage</div></div>
  </div>
  <div class="arrow">â–¼</div>
  <div class="steps">
    <div class="step collect"><span class="step-num">Step 1</span><h3>ğŸ“¥ Collect</h3><ul><li>Read last 20 messages from #content-pipeline & #creative-workshop</li><li>Scan agent session histories for errors & failures</li><li>Parse GEO scores from recent submissions</li><li>Check cron job success/failure rates</li><li>Pull token usage and system health metrics</li></ul></div>
    <div class="arrow">â–¼</div>
    <div class="step analyze"><span class="step-num">Step 2</span><h3>ğŸ”¬ Analyze</h3><ul><li>Detect recurring error patterns across agents</li><li>Compare trends against last 7 days of data</li><li>Cross-reference agent lessons for shared insights</li><li>Evaluate each criterion in eval-criteria.yaml</li><li>Identify criteria needing adjustment or removal</li></ul></div>
    <div class="arrow">â–¼</div>
    <div class="step classify"><span class="step-num">Step 3</span><h3>ğŸ·ï¸ Classify Risk</h3><ul><li>Low Risk â†’ auto-apply (lessons, metrics, eval-criteria, guide wording)</li><li>High Risk â†’ write proposal for Jay's review (skill logic, cron, config, rules)</li></ul></div>
    <div class="arrow">â–¼</div>
    <div class="split">
      <div class="split-card auto"><h4>âœ… Auto-Apply</h4><ul><li><code>lessons/*.md</code> updates</li><li><code>metrics/*.json</code> data points</li><li><code>eval-criteria.yaml</code> tuning</li><li><code>findings/kaizen/</code> reports</li><li>Guide wording & typo fixes</li></ul></div>
      <div class="split-card review"><h4>â³ Pending Jay's Review</h4><ul><li><code>proposals/pending/*.md</code></li><li>Skill logic changes</li><li>Cron schedule changes</li><li>openclaw.json edits</li><li>Points / anti-gaming rules</li></ul></div>
    </div>
    <div class="arrow">â–¼</div>
    <div class="step commit"><span class="step-num">Step 4</span><h3>ğŸ“¤ Commit & Push</h3><ul><li><code>git add -A</code></li><li><code>git commit -m 'kaizen: finding â€” YYYY-MM-DD AM/PM report'</code></li><li><code>git push origin main</code></li></ul></div>
    <div class="arrow">â–¼</div>
    <div class="github-box"><div class="gh-icon">ğŸ“¦</div><h3>GitHub: agent-knowledge</h3><div class="files"><span class="file-tag">findings/kaizen/*.md</span><span class="file-tag">metrics/geo-trends.json</span><span class="file-tag">metrics/agent-health.json</span><span class="file-tag">metrics/token-usage.json</span><span class="file-tag">proposals/pending/*.md</span><span class="file-tag">lessons/*.md</span><span class="file-tag">eval-criteria.yaml</span></div></div>
    <div class="loop-back"><span class="arrow-art">ğŸ”„</span><code>git pull --rebase</code> at start of next cycle â†’ Back to Step 1</div>
  </div>
</div>

<div class="secondary">
  <div class="secondary-card"><h3>ğŸ“ Agent Lesson Flow</h3><div class="flow-steps">
    <div class="flow-step"><div class="dot" style="background:#f78166"></div><p><strong>Agent encounters a problem</strong><br>Error, bug, unexpected behavior</p></div>
    <div class="flow-step"><div class="dot" style="background:#d2a8ff"></div><p><strong>Resolves it</strong> (or escalates to Jay)<br>First occurrence â†’ Jay approval</p></div>
    <div class="flow-step"><div class="dot" style="background:#79c0ff"></div><p><strong>Records in <code>lessons/{agent}.md</code></strong><br>Context, lesson, action</p></div>
    <div class="flow-step"><div class="dot" style="background:#3fb950"></div><p><strong>Commits & pushes</strong> to agent-knowledge</p></div>
    <div class="flow-step"><div class="dot" style="background:#d29922"></div><p><strong>Kaizen reads updated lessons</strong><br>Cross-references across agents</p></div>
    <div class="flow-step"><div class="dot" style="background:#f47067"></div><p><strong>Detects patterns</strong> â†’ proposes systemic improvements</p></div>
  </div></div>
  <div class="secondary-card"><h3>ğŸ§¬ Eval-Criteria Evolution</h3><div class="flow-steps">
    <div class="flow-step"><div class="dot" style="background:#79c0ff"></div><p><strong>Load <code>eval-criteria.yaml</code></strong><br>Current version with all criteria</p></div>
    <div class="flow-step"><div class="dot" style="background:#d2a8ff"></div><p><strong>Evaluate each criterion</strong><br>Check against collected data</p></div>
    <div class="flow-step"><div class="dot" style="background:#f78166"></div><p><strong>Metric meaningless?</strong><br>â†’ Disable + record reason</p></div>
    <div class="flow-step"><div class="dot" style="background:#3fb950"></div><p><strong>New signal found?</strong><br>â†’ Add criterion + rationale</p></div>
    <div class="flow-step"><div class="dot" style="background:#d29922"></div><p><strong>Threshold off?</strong><br>â†’ Adjust based on 7-day trend</p></div>
    <div class="flow-step"><div class="dot" style="background:#58a6ff"></div><p><strong>Commit updated YAML</strong><br>Version history tracked in Git</p></div>
  </div></div>
</div>

</div>

<footer>
  <a href="https://github.com/jayleekr/agent-knowledge">github.com/jayleekr/agent-knowledge</a>
  &nbsp;Â·&nbsp; Powered by <a href="https://openclaw.ai">OpenClaw</a>
</footer>

<script>
function switchTab(name) {
  document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
  document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));
  document.getElementById('tab-' + name).classList.add('active');
  event.target.classList.add('active');

  // Render mermaid diagrams on first switch to diagram tab
  if (name === 'diagram' && !window._mermaidRendered) {
    mermaid.run({ querySelector: '.mermaid' });
    window._mermaidRendered = true;
  }
}
// Initial render
window.addEventListener('load', () => {
  mermaid.run({ querySelector: '.mermaid' });
  window._mermaidRendered = true;
});
</script>

</body>
</html>
